---
import './mouseDevil.pcss'
---

<div class="mouse-devil">
    <div class="mouse-devil--cursor">

    </div>
</div>


<script>
    const mouse = document.querySelector('.mouse-devil') as HTMLElement

    const activeNavItemRect = document.querySelector('nav .active').getBoundingClientRect()
    mouse.style.transform = `translate(${activeNavItemRect.x}px, ${activeNavItemRect.y}px`
    mouse.style.display = 'flex'

    window.onmousemove = e => {
        const x = e.clientX - mouse.offsetWidth / 2
        const y = e.clientY - mouse.offsetHeight / 2
        const intractable = (e.target as HTMLElement).closest('a')
        const interaction = intractable !== null

        const keyframes = {
            transform: `translate(${x}px, ${y}px) scale(${interaction ? 2 : 1}`
        }

        mouse.animate(keyframes, {
            duration: 300,
            fill: 'forwards'
        })
    }
</script>
